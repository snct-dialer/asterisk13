                                Release Summary

                                asterisk-13.33.0

                                Date: 2020-04-30

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-13.32.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                       Testers              Reporters                
   15 Alexander Traud                                14 Alexander Traud       
   11 Jaco Kroon                                     3 Torrey Searle          
   7 Alexander Traud                                 2 sungtae kim            
   5 Sean Bright                                     2 Jaco Kroon             
   3 Torrey Searle                                   1 Paulo Vicentini        
   3 Asterisk Development Team                       1 Patrick Wakano         
   3 Joshua C. Colp                                  1 SÃ©bastien Duthil      
   2 Kevin Harwell                                   1 Jean Aunis - Prescom   
   2 sungtae kim                                     1 Kevin Harwell          
   1 Sungtae Kim                                     1 Jared Smith            
   1 Paulo Vicentini                                 1 Joshua Roys            
   1 Michael Neuhauser                               1 Patrick Wakano         
   1 Jean Aunis                                      1 Daniel Heckl           
   1 Jared Smith                                     1 Michael Neuhauser      
   1 George Joseph                                   1 Bernard Merindol       
   1 Daniel Heckl                                    1 Joshua C. Colp         
   1 Guido Falsi                                     1 Matt Addison           
   1 Sebastien Duthil                                1 George Joseph          
   1 Bernard Merindol                                1 Vitold                 
   1 Rodrigo RamÃrez Norambuena                      1 Anton Satskiy          
   1 Jason Hord (license 6978)                       1 Anton Satskiy          
                                                     1 Vitold                 
                                                     1 Joshua Elson           
                                                     1 Michael Neuhauser      
                                                     1 George Joseph          
                                                     1 sstream                
                                                     1 Guido Falsi            
                                                     1 Joshua Roys            
                                                     1 Olivier Krief          
                                                     1 Jason Hord             

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Improvement

    Category: Applications/app_page

   ASTERISK-27946: dial (API): Storage of dialed target uses
   AST_MAX_EXTENSION when it shouldn't
   Reported by: Joshua Elson
     * [59e193b295] sungtae kim -- dial.c: Removed dial string 80 character
       limitation

    Category: Core/Dial

   ASTERISK-27946: dial (API): Storage of dialed target uses
   AST_MAX_EXTENSION when it shouldn't
   Reported by: Joshua Elson
     * [59e193b295] sungtae kim -- dial.c: Removed dial string 80 character
       limitation

    Category: Functions/func_volume

   ASTERISK-28813: func_volume: Allow decimal numbers as parameter to improve
   granularity
   Reported by: Jean Aunis - Prescom
     * [947a6e8674] Jean Aunis -- func_volume: Accept decimal number as
       argument

    Category: Resources/res_pjsip_session

   ASTERISK-28782: Add support for Content-Disposition header in multi-part
   INVITES
   Reported by: Torrey Searle
     * [ad7be12f0d] Torrey Searle -- res_pjsip_session: implement processing
       of Content-Disposition

  Bug

    Category: Applications/General

   ASTERISK-16676: DAHDIRAS fails to properly initiate pppd unless asterisk
   is running as root
   Reported by: Jaco Kroon
     * [96efd52460] Jaco Kroon -- dahdiras: Only set plugin dahdi.so to pppd
       if we're running as root.

    Category: Applications/app_mixmonitor

   ASTERISK-28780: app_mixmonitor: Memory leak due to race condition between
   AMI MixMonitor and hangup
   Reported by: Joshua C. Colp
     * [6636fff2cf] Joshua C. Colp -- audiohook: Don't allow audiohooks to
       attach to hung up channels.

    Category: Channels/chan_pjsip

   ASTERISK-28835: IPv6 addresses in SDP incorrectly formatted
   Reported by: Daniel Heckl
     * [e4508fcc6e] Daniel Heckl -- res_pjsip: Fixed format of IPv6 addresses
       for external media addresses
   ASTERISK-28817: chan_pjsip: constant DTMF tone if RTP is not setup yet
   Reported by: Kevin Harwell
     * [b2e7fc6972] Kevin Harwell -- chan_pjsip: digit_begin - constant DTMF
       tone if RTP is not setup yet
   ASTERISK-28774: chan_pjsip's rtptimeout is erroneously triggered during
   direct-media (native_rtp) bridge
   Reported by: Michael Neuhauser
     * [0bd1420064] Michael Neuhauser -- chan_psip, res_pjsip_sdp_rtp: ignore
       rtptimeout if direct-media is active
   ASTERISK-28759: A non negotiated rtp frame causes call disconnection when
   there is a SSRC change
   Reported by: Paulo Vicentini
     * [f0b6d24704] Paulo Vicentini -- chan_pjsip: Check audio frame when
       remote SSRC changes.

    Category: Channels/chan_sip/TCP-TLS

   ASTERISK-28372: Asterisk REPLY Wrong Contact header port (TCP)
   Reported by: Anton Satskiy
     * [91ce91dbc6] Alexander Traud -- chan_sip: externhost/externaddr with
       non-default TCP/TLS ports.
   ASTERISK-24428: Document that Asterisk will use the default SIP ports
   (5060 for TCP, 5061 for TLS) if the extern option variants aren't used
   Reported by: sstream
     * [91ce91dbc6] Alexander Traud -- chan_sip: externhost/externaddr with
       non-default TCP/TLS ports.
   ASTERISK-27195: chan_sip: only sets ToS bits on UDP socket, ignoring TCP
   and TLS sockets
   Reported by: Joshua Roys
     * [dac20ce461] Alexander Traud -- chan_sip: DiffServ/ToS not only on UDP
       but also on TCP and TLS sockets.
   ASTERISK-28798: [patch] chan_sip: TCP/TLS client without server.
   Reported by: Alexander Traud
     * [2bcc3df533] Alexander Traud -- chan_sip: TCP/TLS client without
       server.

    Category: Channels/chan_unistim

   ASTERISK-28803: [patch] chan_unistim: Avoid tautological warnings with
   clang.
   Reported by: Alexander Traud
     * [05440f3ef6] Alexander Traud -- chan_unistim: Avoid tautological
       warnings with clang.

    Category: Core/BuildSystem

   ASTERISK-28837: pjproject_bundled: Honor --without-pjproject.
   Reported by: Alexander Traud
     * [1edf0047a1] Alexander Traud -- pjproject_bundled: Honor
       --without-pjproject.
   ASTERISK-28824: BuildSystem: Search for Python/C API when possibly needed
   only.
   Reported by: Alexander Traud
     * [23211669a7] Alexander Traud -- BuildSystem: Search for Python/C API
       when possibly needed only.
   ASTERISK-27717: [patch] BuildSystem: In NetBSD, the Python Programming
   Language is python-2.7.
   Reported by: Alexander Traud
     * [23211669a7] Alexander Traud -- BuildSystem: Search for Python/C API
       when possibly needed only.
   ASTERISK-28816: [patch] BuildSystem: Remove doc/tex and doc/pdf leftovers.
   Reported by: Alexander Traud
     * [9b259c6514] Alexander Traud -- BuildSystem: Remove doc/tex and
       doc/pdf leftovers.
   ASTERISK-28818: [patch] BuildSystem: Allow space in path.
   Reported by: Alexander Traud
     * [785225c5a0] Alexander Traud -- BuildSystem: Allow space in path.

    Category: Core/General

   ASTERISK-28780: app_mixmonitor: Memory leak due to race condition between
   AMI MixMonitor and hangup
   Reported by: Joshua C. Colp
     * [6636fff2cf] Joshua C. Colp -- audiohook: Don't allow audiohooks to
       attach to hung up channels.

    Category: Core/Stasis

   ASTERISK-28801: [patch] stasis: Avoid always true warnings with clang.
   Reported by: Alexander Traud
     * [9082f90217] Alexander Traud -- stasis: Avoid always true warnings
       with clang.

    Category: Documentation

   ASTERISK-28816: [patch] BuildSystem: Remove doc/tex and doc/pdf leftovers.
   Reported by: Alexander Traud
     * [9b259c6514] Alexander Traud -- BuildSystem: Remove doc/tex and
       doc/pdf leftovers.

    Category: Functions/func_aes

   ASTERISK-28788: func_aes: incorrectly printing error 'declined to load'
   Reported by: Alexander Traud
     * [151a27fa81] Alexander Traud -- func_aes: Avoid incorrect error
       message on load.

    Category: Functions/func_channel

   ASTERISK-28796: func_channel: cannot read fields exten, context,
   userfield, channame from dialplan
   Reported by: SÃ©bastien Duthil
     * [bb974877fa] Sebastien Duthil -- func_channel: allow reading 4 fields
       from dialplan

    Category: Functions/func_enum

   ASTERISK-26711: func_enum: ENUM code wrong case
   Reported by: Vitold
     * [58b8c24c40] Sean Bright -- enum.c: Add support for regular expression
       flag in NAPTR record
   ASTERISK-19460: [patch] Function TXTCIDNAME never actually makes DNS calls
   and always returns an empty string
   Reported by: George Joseph
     * [0ee0134cc9] Sean Bright -- enum.c: Make ast_get_txt() actually do
       something.

    Category: Functions/func_odbc

   ASTERISK-20325: Comments in configs/func_odbc.conf.sample are not
   consistent with examples. Missing examples.
   Reported by: Olivier Krief
     * [8b7071994e] Sean Bright -- func_odbc.conf.sample: Clarify sample
       documentation

    Category: General

   ASTERISK-28838: AST_MODULE_INFO requires, MODULEINFO does not mention
   Reported by: Alexander Traud
     * [f91dc188dd] Alexander Traud -- curl: Add build-time dependency.
     * [bb5c0f30c4] Alexander Traud -- res_pjsip_refer: Add build-time
       dependency.
     * [7124850d3c] Alexander Traud -- app_getcpeid: Add build-time
       dependency.
     * [59f2ad2019] Alexander Traud -- res_pjsip: Add build-time dependency.

    Category: PBX/pbx_dundi

   ASTERISK-21205: [patch] dundi_read_result crash due to negative number
   Reported by: Jaco Kroon
     * [9065d95254] Jaco Kroon -- dundi: fix NULL dereference.

    Category: Resources/res_ari_channels

   ASTERISK-28847: ARI channels cuts the endpoint string over 80 characters
   Reported by: sungtae kim
     * [f2d9d31ef5] sungtae kim -- res_ari_channels: Fixed endpoint 80
       characters limit

    Category: Resources/res_pjsip

   ASTERISK-28056: res_pjsip: Incorrect endpoint status after endpoint
   synchronization for a specific AOR
   Reported by: Jason Hord
     * [69805a772e] Jason Hord -- res_pjsip: Don't set endpoint to
       unavailable in all cases.
   ASTERISK-28743: Asterisk is crashing if the 200 OK with SDP
   Reported by: sungtae kim
     * [0daf62f501] Sungtae Kim -- res_pjsip_session: Fixed wrong session
       termination
   ASTERISK-23407: Fix the FSF address in the headers of lots of pjproject
   files
   Reported by: Jared Smith
     * [74718010d0] Jared Smith -- indications.conf.sample: Add indication
       tones for Indonesia

    Category: Resources/res_pjsip_sdp_rtp

   ASTERISK-28774: chan_pjsip's rtptimeout is erroneously triggered during
   direct-media (native_rtp) bridge
   Reported by: Michael Neuhauser
     * [0bd1420064] Michael Neuhauser -- chan_psip, res_pjsip_sdp_rtp: ignore
       rtptimeout if direct-media is active

    Category: Resources/res_rtp_asterisk

   ASTERISK-28852: Unprotected access to nochecksums variable, causes build
   failures
   Reported by: Guido Falsi
     * [547c59f00f] Guido Falsi -- res_rtp_asterisk: Protect access to
       nochecksums with #ifdef
   ASTERISK-28812: First DTMF is not get
   Reported by: Bernard Merindol
     * [43dfd0d300] Bernard Merindol -- res_rtp_asterisk.c:Â Check for first
       DTMF having timestamp set to 0
   ASTERISK-28773: Incorrect Sender SSRC in RTCP when p2p rtp bridge is
   active
   Reported by: Torrey Searle
     * [85786d75c7] Torrey Searle -- res_rtp_asterisk: Send correct sender
       SSRC when p2p bridge in use
   ASTERISK-28759: A non negotiated rtp frame causes call disconnection when
   there is a SSRC change
   Reported by: Paulo Vicentini
     * [f0b6d24704] Paulo Vicentini -- chan_pjsip: Check audio frame when
       remote SSRC changes.
   ASTERISK-28769: DTLS Handshake Fails to Occur if ice_support is enabled
   but not used
   Reported by: Torrey Searle
     * [04f2fad021] Torrey Searle -- res_pjsip_sdp_rtp: Don't wait for ICE if
       not negotiated

    Category: Tests/General

   ASTERISK-28808: [patch] test_stasis: Avoid always true warning with clang.
   Reported by: Alexander Traud
     * [55dacdce56] Alexander Traud -- test_stasis: Avoid always true warning
       with clang.

    Category: Tests/testsuite

   ASTERISK-27717: [patch] BuildSystem: In NetBSD, the Python Programming
   Language is python-2.7.
   Reported by: Alexander Traud
     * [23211669a7] Alexander Traud -- BuildSystem: Search for Python/C API
       when possibly needed only.
   ASTERISK-28789: test_utils: incorrectly printing error 'declined to load'
   Reported by: Alexander Traud
     * [b338da8a19] Alexander Traud -- test_utils: Avoid incorrect error
       message on load.

    Category: pjproject/pjsip

   ASTERISK-28837: pjproject_bundled: Honor --without-pjproject.
   Reported by: Alexander Traud
     * [1edf0047a1] Alexander Traud -- pjproject_bundled: Honor
       --without-pjproject.
   ASTERISK-28758: pjsip startup errors when using "with-ssl" configure
   option
   Reported by: Patrick Wakano
     * [64427c667b] Alexander Traud -- pjproject_bundled: Repair ./configure
       --with-ssl without ARG.

  New Feature

    Category: Core/General

   ASTERISK-6863: [patch] allow Asterisk to set high ToS bits as non-root on
   Linux
   Reported by: Matt Addison
     * [65598af3ff] Alexander Traud -- install_prereq: Add libcap for high
       bits in DiffServ/ToS.

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author               | Summary                            |
   |------------+----------------------+------------------------------------|
   | 9fbc3d405a | Asterisk Development | Update for 13.33.0-rc2             |
   |            | Team                 |                                    |
   |------------+----------------------+------------------------------------|
   | 8767d01f5f | Asterisk Development | Update for 13.33.0-rc1             |
   |            | Team                 |                                    |
   |------------+----------------------+------------------------------------|
   | 074d766fb3 | Asterisk Development | Update CHANGES and UPGRADE.txt for |
   |            | Team                 | 13.33.0                            |
   |------------+----------------------+------------------------------------|
   | 47e887dbf6 | Alexander Traud      | BuildSystem: Only if found LibPRI, |
   |            |                      | check its optional parts.          |
   |------------+----------------------+------------------------------------|
   |            |                      | BuildSystem: Only if found         |
   | 007a6ab05a | Alexander Traud      | external PJProject, check its      |
   |            |                      | optional parts.                    |
   |------------+----------------------+------------------------------------|
   |            |                      | res_rtp_asterisk: iterate all      |
   | ce1213e72f | Jaco Kroon           | local addresses looking to         |
   |            |                      | populate ICE.                      |
   |------------+----------------------+------------------------------------|
   | a142a1455c | Jaco Kroon           | res_pjsip: document legal          |
   |            |                      | dtls_verify endpoint options.      |
   |------------+----------------------+------------------------------------|
   | a0d5f7ccff | Alexander Traud      | _pjsua: Build even with Clang.     |
   |------------+----------------------+------------------------------------|
   | 92efcc9047 | Alexander Traud      | res_rtp_asterisk: Build without    |
   |            |                      | PJProject.                         |
   |------------+----------------------+------------------------------------|
   |            |                      | Revert "res_config_odbc: Preserve  |
   | b92bd5783b | Sean Bright          | empty strings returned by the      |
   |            |                      | database"                          |
   |------------+----------------------+------------------------------------|
   | 42989a285b | Jaco Kroon           | main/backtrace: binutils-2.34 fix. |
   |------------+----------------------+------------------------------------|
   | 5ddac396f0 | Jaco Kroon           | acl: implement a centralized ACL   |
   |            |                      | output mechanism for HAs and ACLs. |
   |------------+----------------------+------------------------------------|
   | 305227dd38 | Joshua C. Colp       | chan_sip: Send 403 when ACL fails. |
   |------------+----------------------+------------------------------------|
   | e96e5cc3d4 | Kevin Harwell        | ast_coredumper: add Asterisk       |
   |            |                      | information dump                   |
   |------------+----------------------+------------------------------------|
   | 6b2aea9ce2 | Jaco Kroon           | netsock2: compile fixes.           |
   |------------+----------------------+------------------------------------|
   | 18b058d65b | Jaco Kroon           | build: enable building with uClibc |
   |------------+----------------------+------------------------------------|
   | 5d5f05ab61 | Jaco Kroon           | build: search from newest to       |
   |            |                      | oldest for gmime.                  |
   |------------+----------------------+------------------------------------|
   |            |                      | res_rtp_asterisk: implement ACL    |
   | f4a8c71dc2 | Jaco Kroon           | mechanism for ICE and STUN         |
   |            |                      | addresses.                         |
   |------------+----------------------+------------------------------------|
   | 345e072a6d | Jaco Kroon           | Update main/backtrace.c to deal    |
   |            |                      | with changes in binutils 2.34.     |
   |------------+----------------------+------------------------------------|
   |            |                      | chan_vpb: Fix 'catching            |
   | 3e4e016a6c | Sean Bright          | polymorphic type ... by value'     |
   |            |                      | error                              |
   |------------+----------------------+------------------------------------|
   | 4990a6e2fb | George Joseph        | CI: Create generic jenkinsfile     |
   |------------+----------------------+------------------------------------|
   | 793f312199 | Joshua C. Colp       | res_rtp_asterisk: Fix unused       |
   |            |                      | warning for "ice".                 |
   |------------+----------------------+------------------------------------|
   | b999447494 | Rodrigo RamÃrez      | res_rtp_asterisk: Add 'rtp show    |
   |            | Norambuena           | settings' cli command              |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 asterisk-13.32.0-summary.html                       |  124 ---
 asterisk-13.32.0-summary.txt                        |  361 ---------
 b/.version                                          |    2
 b/CHANGES                                           |   33
 b/ChangeLog                                         |  728 +++++++++++++++++++-
 b/Makefile                                          |    4
 b/apps/app_dahdiras.c                               |    6
 b/apps/app_getcpeid.c                               |    1
 b/apps/app_mixmonitor.c                             |    1
 b/asterisk-13.33.0-rc2-summary.html                 |   11
 b/asterisk-13.33.0-rc2-summary.txt                  |   82 ++
 b/channels/chan_pjsip.c                             |   68 +
 b/channels/chan_sip.c                               |   71 +
 b/channels/chan_unistim.c                           |    4
 b/channels/chan_vpb.cc                              |    2
 b/configs/samples/func_odbc.conf.sample             |   11
 b/configs/samples/indications.conf.sample           |   11
 b/configs/samples/rtp.conf.sample                   |   30
 b/configure                                         |  661 +++++++++---------
 b/configure.ac                                      |  186 ++---
 b/contrib/scripts/ast_coredumper                    |  417 +++++++++++
 b/contrib/scripts/install_prereq                    |   28
 b/funcs/func_aes.c                                  |    4
 b/funcs/func_channel.c                              |    8
 b/funcs/func_curl.c                                 |    1
 b/funcs/func_volume.c                               |   12
 b/include/asterisk/acl.h                            |   32
 b/include/asterisk/frame.h                          |    8
 b/include/asterisk/netsock2.h                       |    6
 b/include/asterisk/utils.h                          |   24
 b/main/acl.c                                        |   29
 b/main/audiohook.c                                  |    9
 b/main/backtrace.c                                  |    9
 b/main/dial.c                                       |   14
 b/main/enum.c                                       |  104 ++
 b/main/frame.c                                      |   27
 b/main/manager.c                                    |    3
 b/main/named_acl.c                                  |    9
 b/main/stasis.c                                     |    4
 b/makeopts.in                                       |    4
 b/menuselect/configure                              |    8
 b/pbx/pbx_dundi.c                                   |    6
 b/res/ari/resource_channels.c                       |    4
 b/res/res_config_curl.c                             |    2
 b/res/res_config_odbc.c                             |    2
 b/res/res_pjsip.c                                   |   18
 b/res/res_pjsip/pjsip_options.c                     |    7
 b/res/res_pjsip_nat.c                               |    1
 b/res/res_pjsip_path.c                              |    1
 b/res/res_pjsip_refer.c                             |    1
 b/res/res_pjsip_sdp_rtp.c                           |   52 +
 b/res/res_pjsip_session.c                           |   97 ++
 b/res/res_rtp_asterisk.c                            |  447 +++++++-----
 b/tests/CI/universal-asterisk-nongerrit.jenkinsfile |  452 ++++++++++++
 b/tests/test_stasis.c                               |    2
 b/tests/test_utils.c                                |    6
 b/third-party/pjproject/Makefile                    |    2
 b/third-party/pjproject/configure.m4                |  188 ++---
 58 files changed, 3097 insertions(+), 1348 deletions(-)

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><title>Release Summary - asterisk-13.38.0</title><h1 align="center"><a name="top">Release Summary</a></h1><h3 align="center">asterisk-13.38.0</h3><h3 align="center">Date: 2020-11-19</h3><h3 align="center">&lt;asteriskteam@digium.com&gt;</h3><hr><h2 align="center">Table of Contents</h2><ol>
<li><a href="#summary">Summary</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#closed_issues">Closed Issues</a></li>
<li><a href="#commits">Other Changes</a></li>
<li><a href="#diffstat">Diffstat</a></li>
</ol><hr><a name="summary"><h2 align="center">Summary</h2></a><center><a href="#top">[Back to Top]</a></center><p>This release is a point release of an existing major version. The changes included were made to address problems that have been identified in this release series, or are minor, backwards compatible new features or improvements. Users should be able to safely upgrade to this version if this release series is already in use. Users considering upgrading from a previous version are strongly encouraged to review the UPGRADE.txt document as well as the CHANGES document for information about upgrading to this release series.</p><p>The data in this summary reflects changes that have been made since the previous release, asterisk-13.37.0.</p><hr><a name="contributors"><h2 align="center">Contributors</h2></a><center><a href="#top">[Back to Top]</a></center><p>This table lists the people who have submitted code, those that have tested patches, as well as those that reported issues on the issue tracker that were resolved in this release. For coders, the number is how many of their patches (of any size) were committed into this release. For testers, the number is the number of times their name was listed as assisting with testing a patch. Finally, for reporters, the number is the number of issues that they reported that were affected by commits that went into this release.</p><table width="100%" border="0">
<tr><th width="33%">Coders</th><th width="33%">Testers</th><th width="33%">Reporters</th></tr>
<tr valign="top"><td width="33%">6 Sean Bright <sean.bright@gmail.com><br/>3 Asterisk Development Team <asteriskteam@digium.com><br/>3 Alexander Traud <pabstraud@compuserve.com><br/>2 Kevin Harwell <kharwell@digium.com><br/>2 Torrey Searle <tsearle@voxbone.com><br/>2 Ben Ford <bford@digium.com><br/>2 Sungtae Kim <pchero21@gmail.com><br/>1 Holger Hans Peter Freyther <holger@moiji-mobile.com><br/>1 Walter Doekes <walter+asterisk@wjd.nu><br/>1 Jean Aunis <jean.aunis@prescom.fr><br/>1 Joshua C. Colp <jcolp@sangoma.com><br/>1 Michal Hajek <michal.hajek@daktela.com><br/></td><td width="33%"><td width="33%">2 Sebastian Damm <damm@sipgate.de><br/>2 sungtae kim <pchero21@gmail.com><br/>1 Vieri <vieridipaola@gmail.com><br/>1 Torrey Searle <tsearle@gmail.com><br/>1 周家建 <zhou_0611@163.com><br/>1 Sandro Gauci <sandro@enablesecurity.com><br/>1 Péter Juhász <peter.juhasz@comnica.com><br/>1 Thomas Frederiksen <tommer@nicesurprise.com><br/>1 Jean Aunis - Prescom <jean.aunis@prescom.fr><br/>1 Michal Hajek <michal.hajek@daktela.com><br/>1 Hajek Michal <michal.hajek@daktela.com><br/>1 Eric Smith <abkowald@gmail.com><br/>1 Brian J. Murrell <brian@interlinx.bc.ca><br/></td></tr>
</table><hr><a name="closed_issues"><h2 align="center">Closed Issues</h2></a><center><a href="#top">[Back to Top]</a></center><p>This is a list of all issues from the issue tracker that were closed by changes that went into this release.</p><h3>Security</h3><h4>Category: pjproject/pjsip</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29057">ASTERISK-29057</a>: pjsip: Crash on call rejection during high load<br/>Reported by: Sandro Gauci<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=b87527b000af5e8e28bdc2657f11d4d4a6f07500">[b87527b000]</a> Kevin Harwell -- AST-2020-001 - res_pjsip: Return dialog locked and referenced</li>
</ul><br><h3>Improvement</h3><h4>Category: Resources/General</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29056">ASTERISK-29056</a>: Increase reg_server column size for ps_contacts table realtime<br/>Reported by: sungtae kim<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=a2ed7f2eb4eff5e4b9fd63b126755ca5043251b7">[a2ed7f2eb4]</a> Sungtae Kim -- realtime: Increased reg_server character size</li>
</ul><br><h4>Category: Resources/res_stasis</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29055">ASTERISK-29055</a>: Create a Bridge with video_single mode<br/>Reported by: sungtae kim<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=022284f8af12e742aea98709d578b265064d14d9">[022284f8af]</a> Sungtae Kim -- res_stasis.c: Added video_single option for bridge creation</li>
</ul><br><h3>Bug</h3><h4>Category: Applications/app_voicemail</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-26424">ASTERISK-26424</a>: app_voicemail: Undocumented behavior from VMSayName<br/>Reported by: Eric Smith<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=48b64326c60ab273673a1cc99876a7f0f1867d43">[48b64326c6]</a> Sean Bright -- app_voicemail.c: Document VMSayName interruption behavior</li>
</ul><br><h4>Category: Core/General</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-28311">ASTERISK-28311</a>: dsp: ast_dsp_silence_noise_with_energy wrong judgment of frame format<br/>Reported by: 周家建<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=8d28d964d17ae073a742b42e8ee0aebe339b7656">[8d28d964d1]</a> Sean Bright -- dsp.c: Update calls to ast_format_cmp to check result properly</li>
</ul><br><h4>Category: Core/RTP</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-28416">ASTERISK-28416</a>: Unable to get rtp codec payload code for slin<br/>Reported by: Brian J. Murrell<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=9cd11030301f9ec6b7cddad041d381cdcafe66a0">[9cd1103030]</a> Sean Bright -- format_cap: Perform codec lookups by pointer instead of name</li>
</ul><br><h4>Category: Documentation</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-26424">ASTERISK-26424</a>: app_voicemail: Undocumented behavior from VMSayName<br/>Reported by: Eric Smith<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=48b64326c60ab273673a1cc99876a7f0f1867d43">[48b64326c6]</a> Sean Bright -- app_voicemail.c: Document VMSayName interruption behavior</li>
</ul><br><h4>Category: Functions/func_curl</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29085">ASTERISK-29085</a>: func_curl: Segmentation fault when using CURL after setting httpheader CURLOPT<br/>Reported by: Péter Juhász<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=59492c475c4d9b055ec1ce919ea13105e1ce4207">[59492c475c]</a> Sean Bright -- func_curl.c: Prevent crash when using CURLOPT(httpheader)</li>
</ul><br><h4>Category: Resources/res_ari_endpoints</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29108">ASTERISK-29108</a>: resource_endpoints.c : Memory leak if endpoint not found<br/>Reported by: Jean Aunis - Prescom<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=d590f63163adb439ab943fd111df78917043cd83">[d590f63163]</a> Jean Aunis -- resource_endpoints.c: memory leak when providing a 404 response</li>
</ul><br><h4>Category: Resources/res_musiconhold</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-24329">ASTERISK-24329</a>: Music On Hold announcement cuts intro of music the first time it is played<br/>Reported by: Thomas Frederiksen<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=dde85bae7f61ed4230af4a57f0ce2836ce1e35da">[dde85bae7f]</a> Sean Bright -- res_musiconhold: Start playlist after initial announcement</li>
</ul><br><h4>Category: Resources/res_pjsip</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29013">ASTERISK-29013</a>: res_pjsip: Asterisk doesn't stop sending invites (with auth) on 407 replies<br/>Reported by: Sebastian Damm<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=01b7ac0d590b0ad2e3e856d1a81fc87154ae68a0">[01b7ac0d59]</a> Ben Ford -- AST-2020-002 - res_pjsip: Stop sending INVITEs after challenge limit.</li>
</ul><br><h4>Category: Resources/res_pjsip_authenticator_digest</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29013">ASTERISK-29013</a>: res_pjsip: Asterisk doesn't stop sending invites (with auth) on 407 replies<br/>Reported by: Sebastian Damm<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=01b7ac0d590b0ad2e3e856d1a81fc87154ae68a0">[01b7ac0d59]</a> Ben Ford -- AST-2020-002 - res_pjsip: Stop sending INVITEs after challenge limit.</li>
</ul><br><h4>Category: Resources/res_pjsip_config_wizard</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29097">ASTERISK-29097</a>: res_pjsip_config_wizard: Crash when freeing string when failing to add extension<br/>Reported by: Vieri<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=715235202d81d8a1306c9259020ee27ca4d2d7d8">[715235202d]</a> Sean Bright -- pbx.c: On error, ast_add_extension2_lockopt should always free 'data'</li>
</ul><br><h4>Category: Resources/res_pjsip_sdp_rtp</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29051">ASTERISK-29051</a>: res_pjsip_sdp_rtp: Does not set correct values on RTP instance when "auto" DTMF is used<br/>Reported by: Sebastian Damm<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=e60c7731be0915f8b5c93023189843fd5deecc4d">[e60c7731be]</a> Holger Hans Peter Freyther -- res_pjsip_sdp_rtp: Fix accidentally native bridging calls</li>
</ul><br><h4>Category: Resources/res_stasis</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29081">ASTERISK-29081</a>: res_stasis: Add compare function for bridges moh container<br/>Reported by: Hajek Michal<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=9a62d1fd2ae565ac8e547786a7570fd51e112dc0">[9a62d1fd2a]</a> Michal Hajek -- res_stasis.c: Add compare function for bridges moh container</li>
</ul><br><h3>New Feature</h3><h4>Category: Resources/res_pjsip_diversion</h4><a href="https://issues.asterisk.org/jira/browse/ASTERISK-29027">ASTERISK-29027</a>: Implement support for History-Info<br/>Reported by: Torrey Searle<ul>
<li><a href="https://code.asterisk.org/code/changelog/asterisk?cs=9decb3353103f8333b0fb6ad5e23ae8a729dc74b">[9decb33531]</a> Torrey Searle -- res_pjsip_diversion: implement support for History-Info</li>
</ul><br><hr><a name="commits"><h2 align="center">Commits Not Associated with an Issue</h2></a><center><a href="#top">[Back to Top]</a></center><p>This is a list of all changes that went into this release that did not reference a JIRA issue.</p><table width="100%" border="1">
<tr><th>Revision</th><th>Author</th><th>Summary</th></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=e01ed499caff519001aecb182b6d3c03383a6acb">e01ed499ca</a></td><td>Asterisk Development Team</td><td>Update for 13.38.0-rc1</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=c7d3c071dd97395960cf15f5ed245809db9fee98">c7d3c071dd</a></td><td>Asterisk Development Team</td><td>Update CHANGES and UPGRADE.txt for 13.38.0</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=a581fcfe0c28bd3290be7b0316b701c0b8206d3f">a581fcfe0c</a></td><td>Alexander Traud</td><td>chan_sip: On authentication, pick MD5 for sure.</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=bee2e3e720e1d95094487744ac783292c6328416">bee2e3e720</a></td><td>Walter Doekes</td><td>main/say: Work around gcc 9 format-truncation false positive</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=ca8f0b1d21b9c46ebfaf980ba9bf35d6b5339b8a">ca8f0b1d21</a></td><td>Kevin Harwell</td><td>res_pjsip, res_pjsip_session: initialize local variables</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=5bc784130e135bb290f5a80ffa2cd774e6707945">5bc784130e</a></td><td>Alexander Traud</td><td>install_prereq: Add GMime 3.0.</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=55f83b01f81f997205fbf13a94a60a4475a02861">55f83b01f8</a></td><td>Alexander Traud</td><td>BuildSystem: Enable Lua 5.4.</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=e2bbb93de2b06a75f1956e50e50d934529402b0f">e2bbb93de2</a></td><td>Asterisk Development Team</td><td>Update CHANGES and UPGRADE.txt for 13.37.0</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=849ace4af99cb01e6fdcfc87f0c591f56ec43164">849ace4af9</a></td><td>Joshua C. Colp</td><td>asterisk: Add verbose message stating support status.</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=279c202da69b2f173ef1198ffe88d71aa23ce45d">279c202da6</a></td><td>Torrey Searle</td><td>res_pjsip_diversion: fix double 181</td></tr>
<tr><td><a href="https://code.asterisk.org/code/changelog/asterisk?cs=514b1d6b494294c56afb7849947b12af9d6e064a">514b1d6b49</a></td><td>Ben Ford</td><td>Bridging: Use a ref to bridge_channel's channel to prevent crash.</td></tr>
</table><hr><a name="diffstat"><h2 align="center">Diffstat Results</h2></a><center><a href="#top">[Back to Top]</a></center><p>This is a summary of the changes to the source code that went into this release that was generated using the diffstat utility.</p><pre>asterisk-13.37.0-summary.html                                                    |   63 -
asterisk-13.37.0-summary.txt                                                     |  223 ------
b/.version                                                                       |    2
b/ChangeLog                                                                      |  308 +++++++++
b/apps/app_voicemail.c                                                           |    3
b/asterisk-13.38.0-rc1-summary.html                                              |  102 +++
b/asterisk-13.38.0-rc1-summary.txt                                               |  303 +++++++++
b/channels/chan_sip.c                                                            |    9
b/configure                                                                      |    2
b/configure.ac                                                                   |    2
b/contrib/ast-db-manage/config/versions/1ae0609b6646_increse_reg_server_size.py  |   22
b/contrib/ast-db-manage/config/versions/e658c26033ca_create_history_info_flag.py |   38 +
b/contrib/realtime/mysql/mysql_config.sql                                        |   12
b/contrib/realtime/postgresql/postgresql_config.sql                              |   12
b/contrib/scripts/install_prereq                                                 |    2
b/funcs/func_curl.c                                                              |    7
b/include/asterisk/bridge_channel.h                                              |   14
b/include/asterisk/format_cache.h                                                |   13
b/include/asterisk/pbx.h                                                         |    8
b/include/asterisk/res_pjsip.h                                                   |   48 +
b/include/asterisk/res_pjsip_session.h                                           |    2
b/main/asterisk.c                                                                |   10
b/main/bridge.c                                                                  |   35 -
b/main/bridge_channel.c                                                          |   20
b/main/dsp.c                                                                     |    4
b/main/format_cache.c                                                            |   21
b/main/format_cap.c                                                              |    2
b/main/pbx.c                                                                     |   12
b/main/say.c                                                                     |   20
b/res/ari/resource_bridges.h                                                     |    4
b/res/ari/resource_endpoints.c                                                   |    1
b/res/parking/parking_bridge_features.c                                          |    1
b/res/res_musiconhold.c                                                          |    7
b/res/res_parking.c                                                              |    1
b/res/res_pjsip.c                                                                |   55 +
b/res/res_pjsip/pjsip_configuration.c                                            |    1
b/res/res_pjsip/pjsip_transport_management.c                                     |    2
b/res/res_pjsip_config_wizard.c                                                  |    1
b/res/res_pjsip_diversion.c                                                      |  326 +++++++++-
b/res/res_pjsip_pubsub.c                                                         |   10
b/res/res_pjsip_sdp_rtp.c                                                        |    3
b/res/res_pjsip_session.c                                                        |  161 ++++
b/res/res_stasis.c                                                               |   34 -
b/res/stasis/stasis_bridge.c                                                     |    8
44 files changed, 1545 insertions(+), 389 deletions(-)</pre><br></html>
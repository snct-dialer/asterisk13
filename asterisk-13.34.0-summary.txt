                                Release Summary

                                asterisk-13.34.0

                                Date: 2020-06-11

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-13.33.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                      Testers             Reporters                  
   5 Joshua C. Colp                                5 nappsoft                 
   4 Asterisk Development Team                     3 Guido Falsi              
   4 Pirmin Walthert                               2 Joshua C. Colp           
   3 Guido Falsi                                   2 Alexander Traud          
   2 Alexander Traud                               1 lvl                      
   1 Peter Turczak                                 1 Christoph Moench-Tegeder 
   1 Roger James                                   1 Roger James              
   1 George Joseph                                 1 Shlomi Gutman            
   1 Alexander Traud                               1 Dmitry Wagin             
   1 Jaco Kroon                                    1 Jonathan Hunter          
   1 Nathan Bruning                                1 sungtae kim              
   1 sungtae kim                                   1 Etienne Lessard          
                                                   1 Peter Turczak            

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Bug

    Category: Applications/app_osplookup

   ASTERISK-28804: [patch] app_osplookup.c: Avoid a format truncation.
   Reported by: Alexander Traud
     * [103b789e56] Alexander Traud -- app_osplookup: Avoid a format
       truncation.

    Category: Applications/app_queue

   ASTERISK-28829: app_queue: leaking stasis subscription when Redirecting
   call
   Reported by: lvl
     * [10292dc663] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions
   ASTERISK-25844: app_queue: Ghost channels in "core show channels" output
   Reported by: Etienne Lessard
     * [10292dc663] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions

    Category: Applications/app_system

   ASTERISK-28776: Non async-signal-safe syscalls used after fork before exec
   Reported by: nappsoft
     * [146e7c54f1] Pirmin Walthert -- app.c: make sure that no
       non-async-signal-safe syscalls are used after

    Category: Bridges/bridge_softmix

   ASTERISK-28898: bridge_softmix: Conference bridge not passing silent rtp
   packets
   Reported by: Jonathan Hunter
     * [17a878dd99] Joshua C. Colp -- bridge_softmix: Always remove audio
       from mixed frame.

    Category: Channels/chan_local

   ASTERISK-25844: app_queue: Ghost channels in "core show channels" output
   Reported by: Etienne Lessard
     * [10292dc663] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions

    Category: Channels/chan_sip/General

   ASTERISK-28898: bridge_softmix: Conference bridge not passing silent rtp
   packets
   Reported by: Jonathan Hunter
     * [17a878dd99] Joshua C. Colp -- bridge_softmix: Always remove audio
       from mixed frame.

    Category: Core/Channels

   ASTERISK-25844: app_queue: Ghost channels in "core show channels" output
   Reported by: Etienne Lessard
     * [10292dc663] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions

    Category: Core/General

   ASTERISK-28797: [patch] tcptls: Fix notice when TLS is enabled but not
   configured.
   Reported by: Alexander Traud
     * [377f5b6992] Alexander Traud -- tcptls: Fix notice when TLS is enabled
       but not supported.

    Category: Resources/res_ari_bridges

   ASTERISK-28898: bridge_softmix: Conference bridge not passing silent rtp
   packets
   Reported by: Jonathan Hunter
     * [17a878dd99] Joshua C. Colp -- bridge_softmix: Always remove audio
       from mixed frame.

    Category: Resources/res_pjsip

   ASTERISK-28794: res_pjsip: Crash when escaping during URI printing
   Reported by: nappsoft
     * [c8cabb08aa] Joshua C. Colp -- res_pjsip: Use correct pool for storing
       the contact_user value.
   ASTERISK-28854: SIGSEGV when pjsip show history encounters IPV6 address
   Reported by: Roger James
     * [3df1b65dd0] Roger James -- res_pjsip_history.c: Fix to stop SIGSEGV
       when IPv6 addresses are encountered.

    Category: Resources/res_pjsip_logger

   ASTERISK-28932: res_pjsip_logger writing too big packets
   Reported by: nappsoft
     * [5337667d38] Pirmin Walthert -- res_pjsip_logger: use the correct
       pointer when logging tx_messages to pcap
   ASTERISK-28921: Wrong return value check for fwrite when writing to pcap
   file
   Reported by: nappsoft
     * [4075ae5957] Pirmin Walthert -- res_pjsip_logger.c: correct the return
       value checks when writing to pcap

    Category: Resources/res_pjsip_nat

   ASTERISK-28884: x-ast-orig-host not filtered out from request URI and To
   header
   Reported by: nappsoft
     * [4b7293f44e] Pirmin Walthert -- res_pjsip_nat.c: remove
       x-ast-orig-host from request URI and To header

    Category: Resources/res_rtp_asterisk

   ASTERISK-28904: RTP ICE leaks the memory
   Reported by: sungtae kim
     * [5de3f22ee0] sungtae kim -- res_rtp_asterisk.c: Fixed memory leak
   ASTERISK-28852: Unprotected access to nochecksums variable, causes build
   failures
   Reported by: Guido Falsi
     * [5c74f22977] Guido Falsi -- res_rtp_asterisk: Protect access to
       nochecksums with #ifdef

    Category: Resources/res_srtp

   ASTERISK-22920: Crash while Forwarding from TLS extension with CHANNEL
   args secure_bridge_media and secure_bridge_signaling
   Reported by: Shlomi Gutman
     * [18cc090761] Alexander Traud -- core_local: Local calls are always
       secure.

    Category: pjproject/pjsip

   ASTERISK-28794: res_pjsip: Crash when escaping during URI printing
   Reported by: nappsoft
     * [c8cabb08aa] Joshua C. Colp -- res_pjsip: Use correct pool for storing
       the contact_user value.
   ASTERISK-28859: pjsip: Increase maximum candidate count
   Reported by: Joshua C. Colp
     * [35f7e24ebc] Joshua C. Colp -- pjsip: Increase maximum ICE candidate
       count.

  Improvement

    Category: Addons/chan_mobile

   ASTERISK-28832: chan_mobile creates PCMA streams that make some VoIP
   clients crash or not render received audio
   Reported by: Peter Turczak
     * [7714bbfeaa] Peter Turczak -- chan_mobile: Add smoother to make
       SIP/RTP endpoints happy.

    Category: Resources/res_pjsip_logger

   ASTERISK-28895: res_pjsip_logger: Add tons'o'functionality
   Reported by: Joshua C. Colp
     * [4fba0f678b] Joshua C. Colp -- res_pjsip_logger: Expand functionality
       to improve logging.

    Category: Third-Party/pjproject

   ASTERISK-28866: third-party/pjproject/configure.m4 contains bashisms
   Reported by: Guido Falsi
     * [77837059ac] Guido Falsi -- pjproject: Remove bashism from
       configure.m4 script

    Category: pjproject/pjsip

   ASTERISK-28879: pjproject has race conditions in it's build system
   Reported by: Guido Falsi
     * [683f0b269e] Guido Falsi -- pjproject: Fix race condition when
       building with parallel make

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author               | Summary                            |
   |------------+----------------------+------------------------------------|
   | 23f9f9154e | Asterisk Development | Update for 13.34.0-rc3             |
   |            | Team                 |                                    |
   |------------+----------------------+------------------------------------|
   | 7a9a2241ad | Asterisk Development | Update for 13.34.0-rc2             |
   |            | Team                 |                                    |
   |------------+----------------------+------------------------------------|
   | d00cf806ee | Asterisk Development | Update for 13.34.0-rc1             |
   |            | Team                 |                                    |
   |------------+----------------------+------------------------------------|
   | 07bf7890dc | Asterisk Development | Update CHANGES and UPGRADE.txt for |
   |            | Team                 | 13.34.0                            |
   |------------+----------------------+------------------------------------|
   | 0d86f49f7f | Joshua C. Colp       | res_sorcery_config: Always reload  |
   |            |                      | configuration on errors.           |
   |------------+----------------------+------------------------------------|
   | f5a1a91b03 | Jaco Kroon           | Remove #include <sys/cdefs.h>      |
   |------------+----------------------+------------------------------------|
   | 2d1713395b | George Joseph        | app_voicemail: Add workaround for  |
   |            |                      | a gcc 10 issue with -Wrestrict     |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 asterisk-13.33.0-summary.html                                      |  188 ---
 asterisk-13.33.0-summary.txt                                       |  541 ----------
 b/.version                                                         |    2
 b/CHANGES                                                          |   26
 b/ChangeLog                                                        |  319 +++++
 b/addons/chan_mobile.c                                             |   63 -
 b/apps/app_osplookup.c                                             |   13
 b/apps/app_queue.c                                                 |   29
 b/apps/app_voicemail.c                                             |   13
 b/asterisk-13.34.0-rc3-summary.html                                |   11
 b/asterisk-13.34.0-rc3-summary.txt                                 |   81 +
 b/bridges/bridge_softmix.c                                         |    5
 b/configure                                                        |   10
 b/include/asterisk/stasis_channels.h                               |    8
 b/main/app.c                                                       |   17
 b/main/ast_expr2.c                                                 |    1
 b/main/ast_expr2.y                                                 |    1
 b/main/asterisk.c                                                  |   22
 b/main/channel.c                                                   |    5
 b/main/core_local.c                                                |   14
 b/main/editline/np/unvis.c                                         |    1
 b/main/editline/np/vis.c                                           |    1
 b/main/editline/np/vis.h                                           |    2
 b/main/editline/sys.h                                              |    4
 b/main/stasis_channels.c                                           |    3
 b/main/strcompat.c                                                 |   94 -
 b/main/tcptls.c                                                    |    4
 b/res/res_pjsip.c                                                  |    2
 b/res/res_pjsip_history.c                                          |    4
 b/res/res_pjsip_logger.c                                           |  451 +++++++-
 b/res/res_pjsip_nat.c                                              |   29
 b/res/res_rtp_asterisk.c                                           |    1
 b/res/res_sorcery_config.c                                         |   13
 b/third-party/pjproject/configure.m4                               |   10
 b/third-party/pjproject/patches/0050-fix-race-parallel-build.patch |   34
 35 files changed, 1109 insertions(+), 913 deletions(-)
